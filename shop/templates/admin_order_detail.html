{% extends "admin_base.html" %}
{% block title %}Order #{{ order.id }}{% endblock %}
{% block content %}
<section class="section">
  <div class="container">
    <h1 class="title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #{{ order.id }}</h1>
    
    <div class="columns">
      <div class="column is-7">
        <div class="box">
          <h2 class="subtitle"><strong>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</strong></h2>
          <p><strong>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> {{ order.user.username|default:"Guest" }}</p>
          <p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong> <span class="has-text-weight-bold has-text-success">{{ order.total_price }} ‡∏ö‡∏≤‡∏ó</span></p>
          <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</strong> <span class="tag is-info is-medium">{{ order.get_status_display }}</span></p>
          <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:</strong> {{ order.created_at|date:"d M Y, H:i" }}</p>
        </div>
        <div class="box mt-4">
          <h2 class="subtitle"><strong>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</strong></h2>
          <table class="table is-fullwidth is-striped">
            <thead>
              <tr>
                <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th class="has-text-centered">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th class="has-text-right">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                <th class="has-text-right">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°</th>
              </tr>
            </thead>
            <tbody>
              {% for it in order.items.all %}
                <tr>
                  <td>{{ it.product.name|default:"(‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß)" }}</td>
                  <td class="has-text-centered">{{ it.quantity }}</td>
                  <td class="has-text-right">{{ it.unit_price }}</td>
                  <td class="has-text-right">{{ it.quantity|add:0|floatformat:0|add:it.unit_price }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="column is-5">
        <div class="box">
          <h2 class="subtitle"><strong>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</strong></h2>
          <form method="post">
            {% csrf_token %}
            <div class="field">
              <label class="label">{{ form.status.label }}</label>
              <div class="control">
                <div class="select is-fullwidth">
                  {{ form.status }}
                </div>
              </div>
            </div>
            <div class="field">
              <button class="button is-primary is-fullwidth" type="submit">
                <span class="icon">üîÑ</span>
                <span>‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>
              </button>
            </div>
          </form>
          <hr>
          <form method="post" action="{% url 'shop:admin_order_cancel' order.id %}" onsubmit="return confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ?')">
            {% csrf_token %}
            <button class="button is-danger is-fullwidth is-light" type="submit">
              <span class="icon">‚ùå</span>
              <span>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
            </button>
          </form>
        </div>
        <a class="button mt-4 is-fullwidth" href="{% url 'shop:admin_order_list' %}">
            <span class="icon">‚¨ÖÔ∏è</span>
            <span>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}