{% extends 'base.html' %}
{% load static %}
{% block title %}‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ | OnGoShop{% endblock %}
{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title has-text-light">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ #{{ order.id }}</h1>
        <div class="columns">
            <div class="column is-7">
                <div class="box has-background-dark p-5">
                    <h4 class="title is-4 has-text-light">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h4>
                    <ul>
                        {% for item in cart_items %}
                        <li class="has-text-white">
                            {{ item.product.name }} √ó {{ item.quantity }} ‚Äî {{ item.unit_price }} ‡∏ö‡∏≤‡∏ó
                        </li>
                        {% endfor %}
                    </ul>
                     <hr class="has-background-grey-lighter">
                     <h3 class="title is-3 has-text-right has-text-white">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: {{ total_price }} ‡∏ö‡∏≤‡∏ó</h3>
                </div>
            </div>

            <div class="column is-5">
                <div class="box">
                    {% if payment_method == 'qr_code' or payment_method == 'transfer' %}
                    <div class="has-text-centered">
                        <h5 class="title is-5 mb-3">üì∏ ‡∏™‡πÅ‡∏Å‡∏ô QR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h5>
                        <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 15 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                        <figure class="image is-square">
                           <img src="{% static 'img/qr_payment.png' %}" alt="QR Payment">
                        </figure>
                        <form method="post" class="mt-4">
                            {% csrf_token %}
                            <p class="mb-3">‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</p>
                            <button type="submit" name="action" value="paid" id="paid-button" class="button is-success is-fullwidth" disabled>‡∏â‡∏±‡∏ô‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß</button>
                        </form>
                    </div>
                    {% else %}
                    <div class="has-text-centered">
                        <h5 class="title is-5 mb-3">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h5>
                         <form method="post" class="mt-4">
                            {% csrf_token %}
                            <p class="mb-3">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡∏µ‡πâ</p>
                            <button type="submit" name="action" value="paid" id="paid-button" class="button is-success is-fullwidth" disabled>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
                        </form>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<div style="position: fixed; bottom: 2rem; left: 2rem; z-index: 100;">
    <a href="{% url 'shop:my_order_detail' order.id %}" class="button is-light is-medium">
        <span class="icon"><i class="fas fa-arrow-left"></i></span>
        <span>‡∏Å‡∏•‡∏±‡∏ö</span>
    </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const paidButton = document.getElementById('paid-button');
    if (paidButton) {
        setTimeout(() => {
            paidButton.disabled = false;
        }, 15000);
    }
});
</script>
{% endblock %}